!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).LazyLoad=n()}(this,function(){"use strict";function n(){return(n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e,a=arguments[n];for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t}).apply(this,arguments)}function o(t){return n({},D,t)}function t(n,t){var e,a="LazyLoad::Initialized",n=new n(t);try{e=new CustomEvent(a,{detail:{instance:n}})}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:n})}window.dispatchEvent(e)}function a(t,n,e){n=V+n,null===e?t.removeAttribute(n):t.setAttribute(n,e)}function l(t,n){a(t,$,n)}function c(t){return N(t,$)}function u(t,n){I?t.classList.add(n):t.className+=(t.className?" ":"")+n}function i(t,n){I?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}function d(t){return t.llTempImage}function r(t){t&&(t.loadingCount+=1)}function s(t){for(var n,e=[],a=0;n=t.children[a];a+=1)"SOURCE"===n.tagName&&e.push(n);return e}function f(t,n){M(t,"sizes",N(t,n.data_sizes)),M(t,"srcset",N(t,n.data_srcset)),M(t,"src",N(t,n.data_src))}function _(t,n,e){t.addEventListener(n,e)}function g(t,n,e){t.removeEventListener(n,e)}function v(t,n,e){g(t,Q,n),g(t,W,n),g(t,X,e)}function p(t,n,e){delete t.llTempImage,(e=e)&&--e.loadingCount,i(t,n.class_loading)}function b(t,n,e){var a,o,i,r,l;-1<Y.indexOf(t.tagName)?(T(a=t,o=n,i=e),B(a,o,i)):(a=n,o=e,q(i=t),T(i,a,o),J(i,a,o),K(i,a,o)),Z(n,e),t=t,(r=e)&&(l=r._observer)&&r._settings.auto_unobserve&&l.unobserve(t),R(n,e)}function h(t){var n=c(t);n&&(clearTimeout(n),l(t,null))}function F(t,a,o){t.forEach(function(t){var n,e;-1!==et.indexOf(t.tagName)&&(t.setAttribute(at,"lazy"),T(t=t,n=a,e=o),B(t,n,e),Z(n,e),x(t,U),R(n,e))}),o.toLoadCount=0}function G(t,n){var e;t.disconnect(),e=t,n.forEach(function(t){e.observe(t),x(t,C)})}function m(t){return t.container.querySelectorAll(t.elements_selector)}function P(t){return N(t,O)===S}function E(t,n){return t=t||m(n),lt(t).filter(ct)}function e(t,n){var e,a;this._settings=o(t),this.loadingCount=0,e=this,k&&!ot(e._settings)&&(e._observer=new IntersectionObserver(function(t){t.forEach(function(t){return(it(t)?tt:nt)(t.target,t,e)})},rt(e._settings))),a=this,y&&window.addEventListener("online",function(t){st(a)}),this.update(n)}var y="undefined"!=typeof window,w=y&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),k=y&&"IntersectionObserver"in window,I=y&&"classList"in document.createElement("p"),L=y&&1<window.devicePixelRatio,D={elements_selector:"img",container:w||y?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},C="observed",A="loading",S="error",U="native",V="data-",O="ll-status",$="ll-timeout",N=function(t,n){return t.getAttribute(V+n)},x=function(t,n){return a(t,O,n)},z=function(t,n,e,a){t&&(void 0!==a?t(n,e,a):void 0!==e?t(n,e):t(n))},q=function(t){t.llTempImage=document.createElement("img")},M=function(t,n,e){e&&t.setAttribute(n,e)},H={IMG:function(t,n){var e=t.parentNode;e&&"PICTURE"===e.tagName&&s(e).forEach(function(t){f(t,n)}),f(t,n)},IFRAME:function(t,n){M(t,"src",N(t,n.data_src))},VIDEO:function(t,n){s(t).forEach(function(t){M(t,"src",N(t,n.data_src))}),M(t,"poster",N(t,n.data_poster)),M(t,"src",N(t,n.data_src)),t.load()}},B=function(t,n,e){var a=H[t.tagName];a&&(a(t,n),r(e),u(t,n.class_loading),x(t,A),z(n.callback_loading,t,e),z(n.callback_reveal,t,e))},J=function(t,n,e){var a=N(t,n.data_bg),o=N(t,n.data_bg_hidpi),o=L&&o?o:a;o&&(t.style.backgroundImage='url("'.concat(o,'")'),d(t).setAttribute("src",o),r(e),u(t,n.class_loading),x(t,A),z(n.callback_loading,t,e),z(n.callback_reveal,t,e))},K=function(t,n,e){var a=N(t,n.data_bg_multi),o=N(t,n.data_bg_multi_hidpi),o=L&&o?o:a;o&&(t.style.backgroundImage=o,u(t,n.class_applied),x(t,"applied"),z(n.callback_applied,t,e))},Q="load",W="loadeddata",X="error",Y=["IMG","IFRAME","VIDEO"],R=function(t,n){!n||n.toLoadCount||n.loadingCount||z(t.callback_finish,n)},T=function(i,r,l){function c(t){var n,e,a;p(n=i,e=r,a=l),u(n,e.class_error),x(n,S),z(e.callback_error,n,a),R(e,a),v(s,o,c)}var t,n,e,s=d(i)||i,o=function t(n){var e,a,o;p(e=i,a=r,o=l),u(e,a.class_loaded),x(e,"loaded"),z(a.callback_loaded,e,o),R(a,o),v(s,t,c)};e=c,_(t=s,Q,n=o),_(t,W,n),_(t,X,e)},Z=function(t,n){n&&--n.toLoadCount},tt=function(t,n,e){var a,o,i,r=e._settings;z(r.callback_enter,t,n,e),r.load_delay?(a=t,i=e,n=(o=r).load_delay,c(a)||(n=setTimeout(function(){b(a,o,i),h(a)},n),l(a,n))):b(t,r,e)},nt=function(t,n,e){var a=e._settings;z(a.callback_exit,t,n,e),a.load_delay&&h(t)},et=["IMG","IFRAME"],at="loading",ot=function(t){return t.use_native&&at in HTMLImageElement.prototype},it=function(t){return t.isIntersecting||0<t.intersectionRatio},rt=function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}},lt=function(t){return Array.prototype.slice.call(t)},ct=function(t){return!(null!==N(t,O))||N(t,O)===C},st=function(t){var n,e=t._settings;n=m(e),lt(n).filter(P).forEach(function(t){i(t,e.class_error),a(t,O,null)}),t.update()};if(e.prototype={update:function(t){var n=this._settings,t=E(t,n);this.toLoadCount=t.length,w||!k?this.loadAll(t):ot(n)?F(t,n,this):G(this._observer,t)},destroy:function(){this._observer&&this._observer.disconnect(),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var n=this,e=this._settings;E(t,e).forEach(function(t){b(t,e,n)})},load:function(t){b(t,this._settings,this)}},e.load=function(t,n){n=o(n);b(t,n)},y){var ut=e,j=window.lazyLoadOptions;if(j)if(j.length)for(var dt,ft=0;dt=j[ft];ft+=1)t(ut,dt);else t(ut,j)}return e});